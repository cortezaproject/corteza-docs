include::ROOT:partial$variables.adoc[]

= Data Access Layer (DAL)

The {PRODUCT_NAME} Data access Layer(DAL) extends and expands  Cortezaâ€™s capabilities to store and read data from primary and external databases.

The data access layer helps us isolate( separation of concerns) our code from the presentation and business layers. 
We use the data access layer to pull data from different data stores (database server, flat files, web services, whatever else).

[TIP]
====
When changing the underlying database, for example, moving from one relational database like PostgreSQL to MySQL and then abstracting the underlying database is crucial.
{PRODUCT_NAME} data access layer enables you to make the change with ease.
====

=== {PRODUCT_NAME} DAL Features.

* Drivers
Data access drivers enable connection to various data sources.
They supports any facilty that can store and or retrieve records(can be reead or write only).
The drivers include; PostgreSQL, MySQL, SQLIte.

* DAL operations to describe supported operations on driver (pagination, 
searching, reading, writing, updating, deleting).

* Allows multiple connections to different data sources

* Support "dedicated" / "physical" / "existing" RDBMS (SQL) tables

== Database Connection.
 
Corteza defines new data sources in two ways:
. Primary data source
. External Data Source (EDS).

To setup a connection to the primary database  follow the following steps:

. Navigate to menu:Admin Area Application[Connections]

. On the primary database connections section, click on the *[edit]* button.
. Fill in the which requires the following details;

* Name

* Handle

* Location name - Name of the city, country, continent, etc where the data is stored.

* Location coordinates - Coordinates of the location where the data is stored

* Ownership - Name of the company or person who owns the data.

* Highest allowed Sensitivity level - Highest allowed level of sensitivity for the data stored (as set on fields of the module that uses this connection)

To setup a new external database connection follow the following steps:

1. Navigate to menu:Admin Area Application[Connections]

2. On the List of database connections section, click on the *[Add connection]* button.

3. Fill in the form on *[Basic Settings]* section. 

image::data-access-layer/basic-settings.png[role="data-zoomable"]

The form requires the following details:
* Name

* Handle

* Location name - Name of the city, country, continent, etc where the data is stored.

* Location coordinates - Coordinates of the location where the data is stored

* Ownership - Name of the company or person who owns the data.

* Highest allowed Sensitivity level - Highest allowed level of sensitivity for the data stored (as set on fields of the module that uses this connection)

image::data-access-layer/database-connection.png[role="data-zoomable"]

The screenshot above contains the following information;

* Enable encryption of data at rest.
Data at Rest Encryption (DARE) encrypts stored data in the database to prevent unauthorized access.

Click *[Encrypt data at rest Enabled]* checkbox to enable it.

* Enable data at rest protection.
Click *[Data at rest protection provided]* checkbox to enable it.

* Enable data at transit encryption (network encryption).
Stored data is encrypted when moved across networks.

Click on *[Enable data at transit encryption]* checkbox to enable it.

* Enable data at rest backup and restoration implementation.
Click on *[Data at rest backup and restoration implementation]* checkbox to enable it.

=== Issues

Connections and modules, in the context of DAL, can uniquely report errors through the *Issues*.

Issues are used to allow modules/connections to be misconfigured while allowing the system to continue working (for example, if you restart the server with a misconfigured connection, it will still start up).

However, it prevents specific operations, such as creating records for a broken module configuration.

Instead of showing an error message in the toast, it provides a list of issues in a separate UI section.

Module issues are shown under the issues tab on the module edit screen

image::data-access-layer/issues.png[role="data-zoomable"]

Connection issues are shown at the bottom next to where you provide DB connection parameters

image::data-access-layer/connection-issues.png[role="data-zoomable"]






