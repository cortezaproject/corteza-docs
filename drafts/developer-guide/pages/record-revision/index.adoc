= Record revision extension

[NOTE]
====
This feature is among many capabilities of xref:data-access-layer/index.adoc[
data access layer(DAL)].
====

This extension provides revision support so that history is tracked through extending records and adding a “revision” system field that holds a number that increments every time record is updated.

All record changes are stored with an author and timestamp and can be accessed from the Compose.

== Compose record revisions

When enabled, all record operations are stored in the database.

Corteza keeps a revision counter for each record (starting from 1) that increments every time record is updated and only changes of record values are stored for each revision.
[NOTE]
====
A revision is only added when a record is updated, so newly created records don't have revisions. This intentionally reduces the number of revisions that need to be kept.
====

== Accessing and Enabling Record Revisions.

Revision history can be enabled per compose module.

Accessing record revisions:

1.Navigate to compose *[Admin Panel]*.

2.Click on *[Modules]*

3.Select an existing module or click on *[New Module]* button to create a new module.

4.Select the *[Record Revisions]* tab  and click the *[enable record revision]* check box to enable record revisions.

image::record-revision/new-module-conf.gif[role="data-zoomable"]

5.Fill in the *[identifier]* input field.

6.Click the *[save]* button.

[annotation,role="data-zoomable"]
----
{
  "image": {
    "rel": "record-revision/enable-record.png",
    "alias": "revisions_page",
    "w": 1920,
    "h": 1080
  },
  "view": {},
  "annotations": []
}
----

Users can use a different physical database table as a storage

[IMPORTANT]
====
Table must be on the same DAL connection as the records of that module.
====

== Viewing changes

Record changes can be viewed inside the new “record revision history” page block (only available on record pages)

User can select a subgroup of fields to view changes.

[annotation,role="data-zoomable"]
----
{
  "image": {
    "rel": "record-revision/revisions_block.png",
    "alias": "revisions_block",
    "w": 1920,
    "h": 1080
  },
  "view": {},
  "annotations": []
}
----

